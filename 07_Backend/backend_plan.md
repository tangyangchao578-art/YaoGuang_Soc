# YaoGuang SoC 后端设计计划

| 文档版本 | V1.0 |
|---------|------|
| 创建日期 | 2026-01-18 |
| 状态 | 初稿 |
| 负责人 | 后端工程师 |

## 1. 项目概述

### 1.1 项目背景

YaoGuang车规级SoC芯片是一款面向自动驾驶域控制器的专用芯片，采用TSMC 5nm节点工艺，集成了高性能CPU集群、专用NPU加速器、丰富的外设接口以及功能安全岛。后端设计阶段是将经过验证的RTL代码转化为可制造的GDSII版图的关键环节，直接决定芯片的PPA（性能、功耗、面积）指标。本后端设计计划旨在系统化指导团队完成从综合到物理验证的全流程，确保2026年12月31日前完成布局布线，2027年3月31日顺利流片。

本项目面临的主要挑战包括：5nm先进工艺带来的复杂寄生效应、2GHz高频Core/NPU域的时序收敛难度、多电压域设计的功耗管理、以及车规级芯片对可靠性和良率的严格要求。后端团队将在架构团队和验证团队的密切配合下，通过早期风险识别、迭代优化和严格的质量门控，确保项目按时交付。

### 1.2 设计规格

| 参数 | 规格 |
|------|------|
| 工艺节点 | TSMC 5nm (N5) |
| 芯片尺寸 | 15mm × 15mm (225mm²) |
| 逻辑门数 | 约50M NAND等价门 |
| Core/NPU频率 | 2.0 GHz |
| System频率 | 500 MHz |
| 功耗预算 | < 30W (TDP) |
| 工作电压 | 0.75V (Core), 0.9V (IO) |
| 封装形式 | FC-BGA 约1500引脚 |
| 安全等级 | ISO 26262 ASIL-D |

### 1.3 验证里程碑

| 里程碑 | 计划日期 | 状态 | 实际日期 |
|--------|----------|------|----------|
| M4 RTL冻结 | 2026-08-31 | 待开始 | - |
| M5 DV验证通过 | 2026-11-30 | 待开始 | - |
| M7 后端设计完成 | 2026-12-31 | 待开始 | - |
| M8 物理验证通过 | 2027-02-28 | 待开始 | - |
| M9 流片 | 2027-03-31 | 待开始 | - |

## 2. 后端设计流程

### 2.1 流程概述

```
RTL代码 → 逻辑综合 → DFT插入 → Floorplan → 布局 → CTS → 布线 → 
寄生提取 → 时序分析 → ECO修复 → 物理验证 → 签核 → GDSII
```

后端设计采用层次化设计方法，将复杂SoC分解为多个子系统独立优化后再进行顶层集成。关键路径采用先布局后时钟的综合策略，非关键路径采用综合优先策略以平衡面积与时序。电源网络采用均匀分布的mesh结构，配合多种阈值标准单元实现动态功耗优化。

### 2.2 各阶段任务

#### 阶段1: 逻辑综合 (2026-08-01 ~ 2026-08-14, 2周)

逻辑综合阶段将RTL代码转化为门级网表，是后端设计的起点。本阶段主要任务包括：加载TSMC 5nm标准单元库和IP宏单元库、导入SDC时序约束文件、执行多轮综合优化以满足频率和面积目标、生成综合报告供架构团队评估。本阶段的关键交付物是综合后的门级网表和优化后的SDC约束。

综合策略采用"compile_ultra"命令启用延迟优化，针对2GHz高频路径设置严格的时序约束。功耗优化方面启用"power_cg"进行时钟门控优化，预计可降低动态功耗15%~20%。面积优化通过"map_area"和"resource_sharing"平衡，面积目标控制在综合后不超过芯片面积的60%以预留布线空间。

#### 阶段2: DFT插入 (2026-08-15 ~ 2026-08-21, 1周)

DFT（可测试性设计）阶段为芯片添加测试结构，确保量产良率可控。本阶段主要任务包括：扫描链（Scan Chain）插入、存储器内建自测试（MBIST）电路插入、边界扫描（JTAG）电路集成、ATPG（自动测试向量生成）模式生成。考虑到50M门的大规模设计，采用部分扫描策略，优先对高频和复杂控制逻辑进行扫描链插入，目标故障覆盖率不低于95%。

扫描链压缩采用72:1压缩比，配合EDT（嵌入式压缩）技术减少测试向量数量和测试时间。MBIST针对所有SRAM和ROM宏单元自动插入，测试算法采用March算法族。DFT完成后的网表将返回综合阶段进行时序重优化，确保测试模式下的时序满足要求。

#### 阶段3: Floorplan (2026-08-22 ~ 2026-09-04, 2周)

Floorplan（布局规划）阶段确定芯片的整体布局方案，是影响后续P&R质量和时序收敛的关键。本阶段主要任务包括：宏单元（Hard Macro）放置、电源网络（Power Network）规划、IO单元分布、Core/Cache/NPU等功能区域划分、拥塞分析和优化。

宏单元放置遵循"热分离"原则，将高功耗模块（如NPU、GPU）分散布局以避免热点。电源网络采用8层金属mesh结构，电源条宽度和间距根据电流密度需求优化设计。IO布局考虑封装形式和信号完整性需求，高速接口（DDR5、PCie4.0）放置在芯片边缘以缩短走线长度。初步floorplan完成后进行全芯片拥塞分析和时序预估，不满足要求则进行迭代优化。

#### 阶段4: 布局布线 (2026-09-05 ~ 2026-09-25, 3周)

布局布线（Place & Route）是后端设计的主体阶段，将标准单元按照时序和拥塞约束放置并完成信号连接。本阶段细分为：全局布局（Global Placement）、详细布局（Detail Placement）、时钟树综合（CTS）、全局布线（Global Routing）、详细布线（Detail Routing）、布线优化（Route Optimization）。

全局布局采用Naylor算法优化线长和时序，详细布局确保单元放置满足设计规则。时钟树综合采用H-tree变体结构，目标偏差（Skew）小于50ps，对2GHz Core域采用多级CTS结构。布线阶段优先保证时序关键信号的布线资源，必要时采用上层金属走线以减少延迟。SI（信号完整性）分析贯穿布线全过程，通过添加屏蔽和调整线间距抑制串扰。

#### 阶段5: 时序收敛 (2026-09-26 ~ 2026-10-31, 5周)

时序收敛是确保芯片功能正确的核心环节，本阶段迭代执行寄生参数提取、静态时序分析（STA）和ECO修复。5nm工艺下，互连线延迟占比超过40%，精确的寄生参数提取对时序收敛至关重要。

时序分析采用PrimeTime签核工具，设置多点（Multi-Mode-Multi-Corner）分析场景，覆盖PVT（工艺、电压、温度）极限组合。Setup分析目标为所有路径裕度大于10%时钟周期，Hold分析目标为所有路径裕度大于50ps。针对高频2GHz域，建立专门的关键路径优化流程，必要时采用人工干预调整。ECO修复采用金属层ECO和少量标准单元替换策略，避免大幅度返工。

#### 阶段6: 物理验证 (2026-11-01 ~ 2026-11-30, 4周)

物理验证阶段确保版图满足制造要求，是流片前的最后关卡。主要任务包括：设计规则检查（DRC）、版图与原理图一致性检查（LVS）、天线效应检查（Antenna Check）、电迁移检查（EM）、功耗分析（Power Analysis）。

DRC检查覆盖TSMC 5nm全系列设计规则，重点关注最小金属间距、栅极过栅、天线比等关键规则。LVS采用Calibre工具，确保版图网表与签核网表完全一致。电迁移检查验证所有金属走线电流密度满足寿命要求，电源网络需额外满足IR Drop和EM联合约束。功耗分析采用PrimeTime PX进行动态功耗仿真，确保实际工作场景下功耗不超过30W预算。

#### 阶段7: 签核与输出 (2026-12-01 ~ 2026-12-31, 1个月)

签核阶段汇总所有设计数据，输出流片所需的完整文件包。主要交付物包括：GDSII版图文件、网表文件（Verilog/VCD）、时序库文件（.lib）、功耗模型文件、设计约束文件、测试向量文件。签核前需完成最后一轮Full-Chip STA验证，确认所有corner和模式均满足时序要求。

## 3. 资源分配

### 3.1 团队配置

| 角色 | 人数 | 负责模块 | 工作占比 |
|------|------|----------|----------|
| 资深后端工程师 | 2 | 顶层集成、时钟树、签核 | 100% |
| 后端工程师 | 6 | 各子系统P&R、时序优化 | 100% |
| DFT工程师 | 2 | Scan链、MBIST、ATPG | 100% |
| 物理验证工程师 | 2 | DRC/LVS/EM/IR Drop | 100% |
| 时序工程师 | 2 | STA分析、时序签核 | 100% |
| CAD工程师 | 1 | 流程脚本、服务器运维 | 50% |

### 3.2 EDA工具需求

| 工具名称 | 厂商 | 用途 | 并发License数 |
|----------|------|------|---------------|
| Design Compiler | Synopsys | 逻辑综合 | 8 |
| DFT Compiler | Synopsys | DFT插入 | 4 |
| IC Compiler II | Synopsys | 布局布线 | 12 |
| PrimeTime | Synopsys | 静态时序分析 | 8 |
| PrimeTime PX | Synopsys | 功耗分析 | 4 |
| StarRC | Synopsys | 寄生参数提取 | 6 |
| Calibre | Siemens | DRC/LVS/ERC | 6 |
| Voltus | Cadence | IR Drop/EM分析 | 4 |

### 3.3 计算资源

后端设计涉及大规模计算任务，需配备充足的服务器资源。逻辑综合和P&R阶段对内存需求较高，建议每台服务器配置512GB以上内存。寄生参数提取和全芯片STA分析计算量大，需配置高性能计算集群支持并行任务。存储方面，项目总数据量预计超过20TB，需配置高速SSD存储和完整备份策略。

## 4. 风险与对策

| 风险项 | 概率 | 影响 | 严重性 | 应对策略 |
|--------|------|------|--------|----------|
| 高频2GHz时序不收敛 | 高 | 高 | 严重 | 提前时序分析，预留6周ECO时间；建立关键路径追踪机制；必要时降低频率或优化逻辑 |
| 5nm工艺DRC违例多 | 中 | 高 | 严重 | 与foundry保持密切沟通；提前获取最新规则文件；优化floorplan减少违例 |
| 电源网络IR Drop超标 | 中 | 高 | 严重 | 精细化电源网络设计；增加PG straps数量；预留充足EM margin |
| 资源争用导致进度延迟 | 中 | 中 | 中 | 提前申请license；制定资源调度优先级；利用夜间和周末批量任务 |
| DFT覆盖率不达标 | 低 | 中 | 中 | 提前DFT规划；与设计团队协作优化可测试性；预留ATPG调试时间 |
| 跨时钟域亚稳态 | 低 | 高 | 严重 | 完善SDC约束；增加同步器；进行CDC验证 |

## 5. 质量门控

### 5.1 阶段准入/准出标准

| 阶段 | 准入条件 | 准出标准 |
|------|----------|----------|
| 综合 | RTL冻结、库文件就绪 | 时序收敛>90%、面积<60%、无严重违例 |
| DFT | 综合网表完成 | Scan覆盖率>95%、压缩率>50:1、无测试冲突 |
| Floorplan | DFT网表完成 | 宏单元放置完成、电源网络完整、拥塞可控 |
| P&R | Floorplan通过 | 布线完成率100%、无开路/短路、SI满足 |
| 时序 | P&R完成 | Setup/Hold全corner收敛、无时序违例 |
| 物理验证 | 时序收敛 | DRC清洁、LVS清洁、天线通过 |
| 签核 | 物理验证通过 | 全项签核通过、数据包完整 |

### 5.2 评审节点

- **综合评审**: 检查综合报告，确认时序和面积目标达成
- **Floorplan评审**: 评审布局方案，确认宏单元放置和电源网络
- **P&R评审**: 评审布线结果，确认布线完成率和质量
- **时序评审**: 确认全芯片时序收敛，签核corner全部通过
- **物理验证评审**: 确认DRC/LVS清洁，签发物理验证证书
- **签核评审**: 最终评审，确认所有数据正确完整

## 6. 交付物清单

| 阶段 | 交付物 | 文件格式 | 计划日期 |
|------|--------|----------|----------|
| 综合 | 综合网表 | Verilog | 2026-08-14 |
| 综合 | 综合报告 | PDF | 2026-08-14 |
| 综合 | SDC约束 | .sdc | 2026-08-14 |
| DFT | DFT网表 | Verilog | 2026-08-21 |
| DFT | ATPG向量 | .stil | 2026-08-21 |
| DFT | DFT报告 | PDF | 2026-08-21 |
| Floorplan | 布局DEF | .def | 2026-09-04 |
| Floorplan | 电源网络报告 | PDF | 2026-09-04 |
| P&R | 布线后网表 | Verilog | 2026-09-25 |
| P&R | 布线DEF | .def | 2026-09-25 |
| P&R | P&R报告 | PDF | 2026-09-25 |
| 时序 | 签核网表 | Verilog | 2026-10-31 |
| 时序 | 时序报告 | SDF/HTML | 2026-10-31 |
| 物理验证 | GDSII版图 | .gds | 2026-11-30 |
| 物理验证 | 物理验证报告 | PDF | 2026-11-30 |
| 签核 | 流片数据包 | 多种格式 | 2026-12-31 |
| 签核 | 最终签核报告 | PDF | 2026-12-31 |

## 7. 沟通与报告机制

### 7.1 例行会议

- **每日站会** (工作日 9:00): 各模块进度同步，问题快速升级
- **周例会** (周五 14:00): 进度审查，风险评估，下周计划
- **月度评审** (月末): 里程碑评审，资源调整决策

### 7.2 报告机制

- **日报**: 各工程师提交进度和问题
- **周报**: 汇总项目状态，发送给项目干系人
- **里程碑报告**: 每个重要节点输出正式文档

## 8. 审批

| 角色 | 姓名 | 签名 | 日期 |
|------|------|------|------|
| 后端工程师 | | | |
| 验证经理 | | | |
| 架构师 | | | |
| 项目经理 | | | |
