# Feature List - 10G/1G Ethernet Controller

## 基本信息
| 项目 | 内容 |
|------|------|
| **模块名称** | ethernet_controller |
| **版本** | V1.0 |
| **作者** | 前端设计团队 |
| **创建日期** | 2026-01-19 |
| **关联Spec版本** | V1.0 |

---

## Feature列表

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| FE_001 | 10Gbps (10GBASE-R) MAC支持 | P0 | 功能 | 无 | 10Gbps传输正常 |
| FE_002 | 1Gbps (1000BASE-T) MAC支持 | P0 | 功能 | 无 | 1Gbps传输正常 |
| FE_003 | 100Mbps/10Mbps (MII/GMII) 支持 | P1 | 功能 | 无 | 降速传输正常 |
| FE_004 | XGMII接口 (64-bit) | P0 | 功能 | 无 | XGMII协议正确 |
| FE_005 | RGMII接口 (4-bit) | P1 | 功能 | 无 | RGMII协议正确 |
| FE_006 | MII/GMII接口 (8-bit) | P1 | 功能 | 无 | MII/GMII协议正确 |
| FE_007 | TX/RX帧处理 (Preamble/SFD/FCS) | P0 | 功能 | 无 | 帧格式正确 |
| FE_008 | VLAN Tag插入/剥离 | P1 | 功能 | 无 | VLAN处理正确 |
| FE_009 | CRC32生成/校验 | P0 | 功能 | 无 | CRC正确 |
| FE_010 | Pause Frame支持 (802.3x) | P1 | 功能 | 无 | Pause帧正确 |
| FE_011 | DMA Scatter-Gather (16 desc) | P0 | 功能 | 无 | DMA传输正常 |
| FE_012 | 多通道DMA (8通道) | P1 | 功能 | 无 | 多通道独立 |
| FE_013 | TSN 802.1AS时间同步 | P2 | 功能 | 无 | 时间戳正确 |
| FE_014 | TSN 802.1Qbv门控 | P2 | 功能 | 无 | 门控正确 |
| FE_015 | TSN 802.1Qci流过滤 | P2 | 功能 | 无 | 流过滤正确 |
| FE_016 | 帧抢占 (802.3br) | P2 | 功能 | 无 | 抢占正确 |
| FE_017 | Cut-Through/Store-Forward | P1 | 配置 | 无 | 模式切换正常 |
| FE_018 | 巨帧支持 (Jumbo Frame) | P1 | 功能 | 无 | 9KB帧正常 |
| FE_019 | 统计计数器 | P1 | 功能 | 无 | 计数正确 |
| FE_020 | 错误检测 (CRC/Length) | P0 | 异常 | 无 | 错误检测 |
| FE_021 | AXI4-Stream接口 | P0 | 功能 | 无 | 接口协议正确 |
| FE_022 | Link状态监测 | P0 | 功能 | 无 | 状态变化检测 |
| FE_023 | 自动协商 (1000BASE-T) | P1 | 功能 | 无 | 协商正确 |
| FE_024 | 带宽利用率测试 (>90%) | P2 | 性能 | 无 | 吞吐量达标 |

---

### FE_001: 10Gbps (10GBASE-R) MAC支持
- **描述**: 实现10Gbps Ethernet MAC，支持10GBASE-R标准
- **前置条件**: XGMII接口
- **测试步骤**:
  1. 配置10Gbps模式
  2. 发起连续传输
  3. 测量吞吐量
- **预期结果**: 10Gbps稳定传输
- **关联需求**: 架构规格3.3

### FE_002: 1Gbps (1000BASE-T) MAC支持
- **描述**: 实现1Gbps Ethernet MAC，支持1000BASE-T标准
- **前置条件**: GMII/RGMII接口
- **测试步骤**:
  1. 配置1Gbps模式
  2. 发起传输
  3. 验证数据完整性
- **预期结果**: 1Gbps传输正常
- **关联需求**: 架构规格3.3

### FE_003: 100Mbps/10Mbps (MII/GMII) 支持
- **描述**: 实现100Mbps和10Mbps降速模式
- **前置条件**: MII接口
- **测试步骤**:
  1. 配置100Mbps模式
  2. 配置10Mbps模式
  3. 验证传输
- **预期结果**: 降速传输正常
- **关联需求**: 架构规格3.3

### FE_004: XGMII接口 (64-bit)
- **描述**: 实现XGMII 64-bit并行接口
- **前置条件**: 无
- **测试步骤**:
  1. 连接XGMII PHY
  2. 检查信号时序
  3. 传输验证
- **预期结果**: XGMII协议正确
- **关联需求**: 架构规格3.3

### FE_005: RGMII接口 (4-bit)
- **描述**: 实现RGMII 4-bit DDR接口
- **前置条件**: 无
- **测试步骤**:
  1. 连接RGMII PHY
  2. 检查时钟对齐
  3. 传输验证
- **预期结果**: RGMII协议正确
- **关联需求**: 架构规格3.3

### FE_006: MII/GMII接口 (8-bit)
- **描述**: 实现MII/GMII 8-bit接口
- **前置条件**: 无
- **测试步骤**:
  1. 连接GMII PHY
  2. 传输验证
- **预期结果**: GMII协议正确
- **关联需求**: 架构规格3.3

### FE_007: TX/RX帧处理
- **描述**: 实现TX/RX帧的Preamble插入/剥离、SFD检测、FCS生成/校验
- **前置条件**: 无
- **测试步骤**:
  1. 发送标准帧
  2. 检查Preamble
  3. 检查FCS
- **预期结果**: 帧格式正确
- **关联需求**: 架构规格3.3

### FE_008: VLAN Tag插入/剥离
- **描述**: 支持VLAN Tag (802.1Q)的插入和剥离
- **前置条件**: FE_007
- **测试步骤**:
  1. 配置VLAN
  2. 发送带VLAN帧
  3. 检查VLAN处理
- **预期结果**: VLAN处理正确
- **关联需求**: 架构规格3.3

### FE_009: CRC32生成/校验
- **描述**: 实现Ethernet CRC32 (FCS)生成和校验
- **前置条件**: FE_007
- **测试步骤**:
  1. 发送帧
  2. 检查CRC生成
  3. 注入CRC错误
  4. 检查错误检测
- **预期结果**: CRC正确，错误检测
- **关联需求**: 架构规格3.3

### FE_010: Pause Frame支持
- **描述**: 实现802.3x Pause Frame的发送和接收
- **前置条件**: FE_007
- **测试步骤**:
  1. 配置Pause Enable
  2. 接收Pause帧
  3. 检查暂停
- **预期结果**: Pause帧正确
- **关联需求**: 架构规格3.3

### FE_011: DMA Scatter-Gather
- **描述**: 实现带Scatter-Gather的DMA控制器
- **前置条件**: 无
- **测试步骤**:
  1. 配置Descriptor Ring
  2. 发起DMA传输
  3. 检查完成
- **预期结果**: DMA传输正常
- **关联需求**: 架构规格3.3

### FE_012: 多通道DMA (8通道)
- **描述**: 支持8个独立的DMA通道
- **前置条件**: FE_011
- **测试步骤**:
  1. 配置多个通道
  2. 并行发起传输
- **预期结果**: 多通道独立工作
- **关联需求**: 架构规格3.3

### FE_013: TSN 802.1AS时间同步
- **描述**: 实现IEEE 802.1AS时间同步
- **前置条件**: TSN_ENABLE
- **测试步骤**:
  1. 配置时间同步
  2. 发送帧并获取时间戳
  3. 检查同步精度
- **预期结果**: 时间戳正确
- **关联需求**: 架构规格3.3

### FE_014: TSN 802.1Qbv门控
- **描述**: 实现IEEE 802.1Qbv时间感知整形器门控
- **前置条件**: FE_013
- **测试步骤**:
  1. 配置门控调度
  2. 验证门控切换
- **预期结果**: 门控正确
- **关联需求**: 架构规格3.3

### FE_015: TSN 802.1Qci流过滤
- **描述**: 实现IEEE 802.1Qci流过滤和计量
- **前置条件**: TSN_ENABLE
- **测试步骤**:
  1. 配置流过滤规则
  2. 验证过滤
- **预期结果**: 流过滤正确
- **关联需求**: 架构规格3.3

### FE_016: 帧抢占 (802.3br)
- **描述**: 实现IEEE 802.3br帧抢占
- **前置条件**: TSN_ENABLE
- **测试步骤**:
  1. 配置帧抢占
  2. 高优先级抢占低优先级
- **预期结果**: 抢占正确
- **关联需求**: 架构规格3.3

### FE_017: Cut-Through/Store-Forward
- **描述**: 支持Cut-Through和Store-Forward两种转发模式
- **前置条件**: 无
- **测试步骤**:
  1. 配置Cut-Through模式
  2. 配置Store-Forward模式
- **预期结果**: 模式切换正常
- **关联需求**: 架构规格3.3

### FE_018: 巨帧支持 (Jumbo Frame)
- **描述**: 支持最大9KB Jumbo Frame
- **前置条件**: 无
- **测试步骤**:
  1. 配置Jumbo Enable
  2. 发送9KB帧
  3. 验证完整性
- **预期结果**: 巨帧正常
- **关联需求**: 架构规格3.3

### FE_019: 统计计数器
- **描述**: 实现TX/RX字节、包、错误统计
- **前置条件**: 无
- **测试步骤**:
  1. 发起传输
  2. 读取统计
- **预期结果**: 计数正确
- **关联需求**: 架构规格3.3

### FE_020: 错误检测
- **描述**: 实现CRC错误、长度错误、Jabber检测
- **前置条件**: FE_009
- **测试步骤**:
  1. 注入错误
  2. 检查错误检测
- **预期结果**: 错误检测
- **关联需求**: 架构规格3.3

### FE_021: AXI4-Stream接口
- **描述**: 实现AXI4-Stream接口用于MAC和上层通信
- **前置条件**: 无
- **测试步骤**:
  1. 发起AXI4-Stream传输
  2. 验证握手
- **预期结果**: 接口正确
- **关联需求**: 架构规格3.3

### FE_022: Link状态监测
- **描述**: 实现Link Up/Down状态监测
- **前置条件**: 无
- **测试步骤**:
  1. 连接PHY
  2. 断开PHY
  3. 检查状态变化
- **预期结果**: 状态变化检测
- **关联需求**: 架构规格3.3

### FE_023: 自动协商
- **描述**: 实现1000BASE-T自动协商
- **前置条件**: GMII/RGMII
- **测试步骤**:
  1. 连接支持自协商的PHY
  2. 检查协商结果
- **预期结果**: 协商正确
- **关联需求**: 架构规格3.3

### FE_024: 带宽利用率测试
- **描述**: 测试实际带宽利用率
- **前置条件**: FE_001
- **测试步骤**:
  1. 连续发送最大帧
  2. 测量吞吐量
- **预期结果**: >90%利用率
- **关联需求**: 架构规格3.3

---

## 验证资源估算

| 类别 | 数量 | 备注 |
|------|------|------|
| **功能测试用例** | 70+ | MAC/DMA/TSN |
| **异常测试用例** | 30+ | 错误注入 |
| **配置测试用例** | 20+ | 模式切换 |
| **性能测试用例** | 15+ | 带宽测试 |
| **仿真时间预估** | 800+小时 | 回归测试 |

---

## 追溯矩阵

| Feature ID | 架构需求 | 设计规格 |
|------------|----------|----------|
| FE_001 | 3.3.1 | 5.3.1 |
| FE_002 | 3.3.2 | 5.3.2 |
| FE_003 | 3.3.2 | 5.3.2 |
| FE_004 | 3.3.3 | 5.3.3 |
| FE_005 | 3.3.3 | 5.3.3 |
| FE_006 | 3.3.3 | 5.3.3 |
| FE_007 | 3.3.4 | 5.3.4 |
| FE_008 | 3.3.5 | 5.3.5 |
| FE_009 | 3.3.6 | 5.3.6 |
| FE_010 | 3.3.7 | 5.3.7 |
| FE_011 | 3.3.8 | 5.3.8 |
| FE_012 | 3.3.8 | 5.3.8 |
| FE_013 | 3.3.9 | 5.3.9 |
| FE_014 | 3.3.9 | 5.3.9 |

---

**文档版本**: V1.0  
**创建日期**: 2026-01-19  
**状态**: 已交付DV
