# Feature List - CPU Cluster

## 基本信息

| 项目 | 内容 |
|------|------|
| 模块名称 | cpu_cluster |
| 版本 | V1.0 |
| 作者 | 前端设计工程师 |
| 创建日期 | 2026-01-19 |
| 关联架构文档 | 03_CPU_Subsystem_Microarchitecture.md V1.0 |
| 目标工艺 | 7nm FinFET |
| 目标频率 | A78AE: 2.0GHz, R52: 1.5GHz |

---

## 一、应用处理器集群特性 (8x Cortex-A78AE)

### 1.1 核心微架构特性

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| A78_F001 | 13级流水线深度配置 | P0 | 功能 | 时钟复位 | 流水线各级寄存器正常切换 |
| A78_F002 | 8-way超标量发射 | P0 | 功能 | 无 | 每周期最多8条指令发射 |
| A78_F003 | 256-entry ROB乱序执行 | P0 | 功能 | 无 | 乱序执行正确，重排序完成 |
| A78_F004 | TAGE分支预测器 | P1 | 功能 | 无 | 预测准确率≥95% |
| A78_F005 | 投机执行及错误路径恢复 | P0 | 功能 | 分支预测 | 预测错误时正确刷新流水线 |
| A78_F006 | 4个ALU执行单元 | P0 | 功能 | 无 | 4个ALU并行工作 |
| A78_F007 | 4个AGU地址生成单元 | P0 | 功能 | 无 | 4个AGU并行工作 |
| A78_F008 | 4个FP/ASIMD执行单元 | P1 | 功能 | 无 | 浮点和SIMD指令正确执行 |
| A78_F009 | 2个MAC乘累加单元 | P1 | 功能 | 无 | MAC指令正确执行 |
| A78_F010 | 4个Ld/St加载存储单元 | P0 | 功能 | 无 | 内存访问正确执行 |

### 1.2 L1 Cache特性

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| A78_L1_001 | 64KB I-Cache, 4路组相联 | P0 | 功能 | 无 | Cache容量64KB，关联度4 |
| A78_L1_002 | 64KB D-Cache, 4路组相联 | P0 | 功能 | 无 | Cache容量64KB，关联度4 |
| A003 | 6478_L1_字节块大小 | P0 | 功能 | 无 | 块大小64B对齐 |
| A78_L1_004 | LRU替换策略 | P1 | 功能 | 无 | 替换算法正确 |
| A78_L1_005 | 4周期访问延迟 | P0 | 性能 | 无 | 访问延迟≤4 cycles |
| A78_L1_006 | 256-bit带宽/周期 | P0 | 性能 | 无 | 带宽达标 |
| A78_L1_007 | SECDED ECC保护 | P0 | 异常 | 无 | 单比特错误纠正，双比特检测 |
| A78_L1_008 | 写回+写分配策略 | P0 | 功能 | 无 | 写策略正确实现 |
| A78_L1_009 | 4路I-TLB, 64条目 | P0 | 功能 | 无 | TLB容量64条目 |
| A78_L1_010 | 4路D-TLB, 64条目 | P0 | 功能 | 无 | TLB容量64条目 |
| A78_L1_011 | 共享S2 TLB, 32条目 | P1 | 功能 | 无 | Stage2翻译正确 |
| A78_L1_012 | 支持4KB/16KB/64KB页大小 | P0 | 功能 | 无 | 页大小配置正确 |

### 1.3 L2 Cache特性

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| A78_L2_001 | 512KB私有L2/核 | P0 | 功能 | 无 | L2容量512KB/核 |
| A78_L2_002 | 8路组相联 | P0 | 功能 | 无 | 关联度8 |
| A78_L2_003 | 64字节块大小 | P0 | 功能 | 无 | 块大小64B |
| A78_L2_004 | LRU替换策略 | P1 | 功能 | 无 | 替换算法正确 |
| A78_L2_005 | 12周期访问延迟 | P0 | 性能 | 无 | 访问延迟≤12 cycles |
| A78_L2_006 | 512-bit带宽/周期 | P0 | 性能 | 无 | 带宽达标 |
| A78_L2_007 | SECDED ECC保护 | P0 | 异常 | 无 | ECC正确 |
| A78_L2_008 | 写回+写分配策略 | P0 | 功能 | 无 | 写策略正确 |
| A78_L2_009 | 2级预取器支持 | P1 | 功能 | 无 | 预取正确 |
| A78_L2_010 | ACE4协议接口 | P0 | 协议 | 无 | ACE4协议合规 |

### 1.4 频率与功耗管理

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| A78_PM_001 | DVFS 1.5-2.0GHz | P0 | 功能 | 时钟 | 频率可调 |
| A78_PM_002 | 模块级时钟门控 | P0 | 功能 | 无 | 时钟门控生效 |
| A78_PM_003 | Core级电源门控 | P0 | 功能 | 电源 | 电源关断正确 |
| A78_PM_004 | 内置温度监控 | P1 | 功能 | 传感器 | 温度读取正确 |
| A78_PM_005 | WFI低功耗待机 | P0 | 功能 | 无 | WFI进入低功耗 |
| A78_PM_006 | WFE低功耗等待 | P1 | 功能 | 无 | WFE正确执行 |

### 1.5 集群级特性

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| A78_CL_001 | ACE4协议512-bit位宽 | P0 | 协议 | 无 | 接口正确 |
| A78_CL_002 | 2.0GHz ACE接口频率 | P0 | 性能 | 时钟 | 频率达标 |
| A78_CL_003 | 128GB/s双向带宽 | P0 | 性能 | 无 | 带宽达标 |
| A78_CL_004 | Snoop-less DVM支持 | P0 | 功能 | 无 | DVM正确 |
| A78_CL_005 | Snoop filter支持 | P0 | 功能 | 无 | Filter正确 |
| A78_CL_006 | 4-bit QoS信号 | P1 | 功能 | 无 | QoS配置正确 |
| A78_CL_007 | CoreSight调试框架 | P1 | 功能 | 调试接口 | 调试功能正常 |
| A78_CL_008 | ETM指令跟踪 | P1 | 功能 | 调试接口 | Trace正确 |
| A78_CL_009 | CTI触发接口 | P2 | 功能 | 无 | 触发正确 |
| A78_CL_010 | ITM指令跟踪宏单元 | P2 | 功能 | 无 | 跟踪正确 |
| A78_CL_011 | TMC跟踪内存控制器 | P2 | 功能 | 无 | 存储正确 |
| A78_CL_012 | 5-wire JTAG+SWD调试 | P0 | 功能 | 调试接口 | 调试连接正常 |

---

## 二、安全处理器集群特性 (2x Cortex-R52 Lockstep)

### 2.1 锁步架构特性

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| R52_LS_001 | 双核锁步架构 | P0 | 功能 | 无 | 双核执行结果一致 |
| R52_LS_002 | Primary+Shadow核配置 | P0 | 功能 | 无 | 主从核配置正确 |
| R52_LS_003 | 指令级结果比较 | P0 | 功能 | 无 | 逐指令比较 |
| R52_LS_004 | 1-cycle比较延迟 | P0 | 性能 | 无 | 比较延迟≤1 cycle |
| R52_LS_005 | 100%单比特错误检测 | P0 | 异常 | 无 | 单比特错误必检测 |
| R52_LS_006 | <5 cycle错误响应 | P0 | 异常 | 无 | 响应时间达标 |
| R52_LS_007 | 32-bit错误码记录 | P0 | 功能 | 无 | 错误码正确记录 |
| R52_LS_008 | Safety Response逻辑 | P0 | 功能 | 无 | 安全响应正确 |
| R52_LS_009 | ARMv8-R AArch32/64支持 | P0 | 功能 | 无 | 架构支持正确 |

### 2.2 核心微架构特性

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| R52_CORE_001 | 8级流水线 | P0 | 功能 | 无 | 流水线正常 |
| R52_CORE_002 | 双发射宽度 | P0 | 功能 | 无 | 双发射正确 |
| R52_CORE_003 | 固定优先级调度 | P0 | 功能 | 无 | 调度正确 |
| R52_CORE_004 | 确定性执行 | P0 | 功能 | 无 | 执行确定 |
| R52_CORE_005 | <10 cycle中断延迟 | P0 | 性能 | 无 | 中断延迟达标 |

### 2.3 存储器特性

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| R52_MEM_001 | 32KB I-Cache/核, 4路组相联 | P0 | 功能 | 无 | Cache正确 |
| R52_MEM_002 | 32KB D-Cache/核, 4路组相联 | P0 | 功能 | 无 | Cache正确 |
| R52_MEM_003 | 4-cycle访问延迟 | P0 | 性能 | 无 | 延迟达标 |
| R52_MEM_004 | SECDED ECC保护 | P0 | 异常 | 无 | ECC正确 |
| R52_MEM_005 | 256KB TCM紧耦合SRAM | P0 | 功能 | 无 | TCM正确 |
| R52_MEM_006 | 1-cycle TCM访问延迟 | P0 | 性能 | 无 | 延迟达标 |
| R52_MEM_007 | 1MB共享L2 Cache | P0 | 功能 | 无 | L2正确 |
| R52_MEM_008 | 12-cycle L2访问延迟 | P0 | 性能 | 无 | 延迟达标 |

### 2.4 安全机制特性

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| R52_SEC_001 | Cache 8-bit SECDED | P0 | 异常 | 无 | ECC正确 |
| R52_SEC_002 | TCM 8-bit SECDED | P0 | 异常 | 无 | ECC正确 |
| R52_SEC_003 | SRAM 8-bit SECDED | P0 | 异常 | 无 | ECC正确 |
| R52_SEC_004 | 寄存器 8-bit SECDED | P0 | 异常 | 无 | ECC正确 |
| R52_SEC_005 | 内部看门狗1-100ms | P0 | 功能 | 无 | 看门狗正确 |
| R52_SEC_006 | 外部看门狗10-500ms | P0 | 功能 | 无 | 看门狗正确 |
| R52_SEC_007 | 窗口看门狗 | P0 | 功能 | 无 | 窗口模式正确 |
| R52_SEC_008 | ASIL-D安全等级 | P0 | 安全 | 无 | 安全认证通过 |

### 2.5 接口特性

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| R52_IF_001 | AXI4 256-bit主接口 | P0 | 协议 | 无 | AXI协议合规 |
| R52_IF_002 | AXI4 256-bit从接口 | P0 | 协议 | 无 | AXI协议合规 |
| R52_IF_003 | 32GB/s带宽 | P0 | 性能 | 无 | 带宽达标 |
| R52_IF_004 | GIC 64路中断 | P0 | 功能 | 无 | 中断正确 |
| R52_IF_005 | 安全看门狗接口 | P0 | 功能 | 无 | 看门狗连接 |
| R52_IF_006 | 32-bit错误报告 | P0 | 功能 | 无 | 错误报告正确 |

---

## 三、中断控制器特性 (GIC-600兼容)

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| GIC_001 | GIC-600协议兼容 | P0 | 协议 | 无 | 协议合规 |
| GIC_002 | 32路A78AE中断 | P0 | 功能 | 无 | 中断正确 |
| GIC_003 | 64路R52中断 | P0 | 功能 | 无 | 中断正确 |
| GIC_004 | 中断优先级支持 | P0 | 功能 | 无 | 优先级正确 |
| GIC_005 | 中断屏蔽支持 | P0 | 功能 | 无 | 屏蔽正确 |
| GIC_006 | 向量化中断 | P0 | 功能 | 无 | 向量正确 |
| GIC_007 | 嵌套中断支持 | P1 | 功能 | 无 | 嵌套正确 |
| GIC_008 | 中断应答机制 | P0 | 功能 | 无 | ACK正确 |
| GIC_009 | 中断状态寄存器 | P0 | 功能 | 无 | 状态正确 |
| GIC_010 | ASIL-D支持(R52) | P0 | 安全 | 无 | 安全认证 |

---

## 四、缓存一致性控制特性

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| SCU_001 | Snoop Control Unit | P0 | 功能 | 无 | SCU功能正常 |
| SCU_002 | ACE4一致性协议 | P0 | 协议 | 无 | 协议合规 |
| SCU_003 | MOESI协议支持 | P0 | 功能 | 无 | MOESI正确 |
| SCU_004 | Snoop Filter (2MB) | P0 | 功能 | 无 | Filter正确 |
| SCU_005 | DVM分布式虚拟内存 | P0 | 功能 | 无 | DVM正确 |
| SCU_006 | 序列化支持 | P0 | 功能 | 无 | 序列化正确 |

---

## 五、性能与功耗特性

### 5.1 性能目标

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| PERF_001 | 总算力≥100K DMIPS | P0 | 性能 | 无 | 性能达标 |
| PERF_002 | 单核≥12.5K DMIPS | P0 | 性能 | 无 | 单核性能达标 |
| PERF_003 | L1 Cache命中率≥95% | P0 | 性能 | 无 | 命中率达标 |
| PERF_004 | L2 Cache命中率≥90% | P0 | 性能 | 无 | 命中率达标 |
| PERF_005 | 内存带宽≥100 GB/s | P0 | 性能 | 无 | 带宽达标 |
| PERF_006 | 内存延迟≤100 ns | P0 | 性能 | 无 | 延迟达标 |

### 5.2 功耗目标

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| PWR_001 | A78AE集群≤14W | P0 | 功耗 | 无 | 功耗达标 |
| PWR_002 | R52集群≤4W | P0 | 功耗 | 无 | 功耗达标 |
| PWR_003 | 时钟门控20-30%节能 | P1 | 功耗 | 无 | 门控生效 |
| PWR_004 | 电源门控40-60%节能 | P1 | 功耗 | 无 | 门控生效 |
| PWR_005 | DVFS 10-20%节能 | P1 | 功耗 | 无 | DVFS生效 |

---

## 六、面积目标

| ID | Feature描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|------------|--------|----------|--------|----------|
| AREA_001 | CPU Cluster总面积≤24mm² | P0 | 面积 | 无 | 面积达标 |
| AREA_002 | 8x A78AE ≤12mm² | P0 | 面积 | 无 | 面积达标 |
| AREA_003 | 8x L2 Cache ≤4mm² | P0 | 面积 | 无 | 面积达标 |
| AREA_004 | 2x R52 ≤2.5mm² | P0 | 面积 | 无 | 面积达标 |
| AREA_005 | L3 Cache ≤2.5mm² | P0 | 面积 | 无 | 面积达标 |

---

## 七、A78AE与R52特性差异对照表

| 特性维度 | Cortex-A78AE | Cortex-R52 | 差异说明 |
|----------|--------------|------------|----------|
| 架构定位 | 应用处理器 | 安全处理器 | A78AE重性能，R52重安全 |
| 核心数 | 8核 | 2核锁步 | A78AE重并行，R52重冗余 |
| ISA | ARMv8-A AArch64 | ARMv8-R AArch32/64 | 指令集不同 |
| 流水线深度 | 13级 | 8级 | A78AE更深，更多并行 |
| 发射宽度 | 8-way超标量 | 双发射 | A78AE更高发射率 |
| 执行模式 | 乱序执行 | 固定优先级调度 | A78AE灵活，R52确定 |
| L1 I-Cache | 64KB/核 | 32KB/核 | A78AE更大 |
| L1 D-Cache | 64KB/核 | 32KB/核 | A78AE更大 |
| L2 Cache | 512KB私有/核 | 1MB共享 | R52共享，A78AE私有 |
| TCM | 无 | 256KB | R52特有 |
| 频率 | 1.5-2.0GHz | 1.0-1.5GHz | A78AE更高 |
| 安全等级 | ASIL-B | ASIL-D | R52更高安全 |
| 中断延迟 | - | <10 cycles | R52更低延迟 |
| 确定性 | 不保证 | 支持 | R52保证确定性 |
| 接口协议 | ACE4 512-bit | AXI4 256-bit | A78AE更高带宽 |
| 功耗预算 | ≤14W | ≤4W | A78AE更高功耗 |
| 调试 | CoreSight完整 | 简化调试 | A78AE更完整 |

---

## 八、验证依赖与交付物

### 8.1 前端设计交付物

| 交付物 | 路径 | 状态 |
|--------|------|------|
| RTL代码 | 04_Design_RTL/ip_rtl/cpu_cluster/*.sv | 待开发 |
| SDC约束 | 04_Design_RTL/ip_rtl/cpu_cluster/cpu_cluster.sdc | 待开发 |
| Feature List | 04_Design_RTL/ip_rtl/cpu_cluster/FEATURE_LIST.md | 本文档 |

### 8.2 DV准入条件

| 条件 | 说明 | 状态 |
|------|------|------|
| 代码覆盖率目标 | ≥95% | 待验证 |
| 功能覆盖率目标 | 100% | 待验证 |
| 断言覆盖率 | ≥90% | 待验证 |
| 形式验证 | 关键模块 | 待验证 |

### 8.3 测试用例预估

| 测试类型 | 预估数量 | 说明 |
|----------|----------|------|
| 功能测试 | 500+ | 正常操作测试 |
| 异常测试 | 200+ | 边界条件测试 |
| 性能测试 | 50+ | 性能基准测试 |
| 安全测试 | 100+ | 安全机制测试 |
| 协议测试 | 100+ | ACE/AXI协议测试 |

---

**文档版本**: V1.0  
**创建日期**: 2026-01-19  
**状态**: 待DV评审
