# Feature List - YaoGuang SoC Top-Level

## 基本信息

| 项目 | 内容 |
|------|------|
| **模块名称** | SoC Top-Level Integration |
| **版本** | V1.0 |
| **作者** | YaoGuang RTL Team |
| **创建日期** | 2026-01-18 |
| **关联文档** | 17_SoC_Top_Architecture.md |
| **交付目标** | CV 工程师 (系统级验证) |

---

## Feature 列表

| ID | Feature 描述 | 优先级 | 验证类型 | 依赖项 | 验收标准 |
|----|-------------|--------|----------|--------|----------|
| FE_SOC_001 | SoC 顶层时钟生成 | P0 | 功能 | 无 | 所有 PLL 正确锁定 |
| FE_SOC_002 | SoC 顶层复位序列 | P0 | 功能 | FE_SOC_001 | 复位按序释放 |
| FE_SOC_003 | 电源域管理 | P0 | 功能 | FE_SOC_001 | 电源域正确开关 |
| FE_SOC_004 | 地址解码 | P0 | 功能 | 无 | 正确路由到从设备 |
| FE_SOC_005 | 引脚复用配置 | P1 | 功能 | 无 | 引脚功能正确 |
| FE_SOC_006 | Boot ROM 访问 | P0 | 功能 | 无 | 正确读取 Boot 代码 |
| FE_SOC_007 | AXI4 到 APB 桥接 | P0 | 功能 | 无 | 协议转换正确 |
| FE_SOC_008 | 中断聚合 | P1 | 功能 | 无 | 中断正确路由 |
| FE_SOC_009 | 错误报告 | P1 | 异常 | 无 | 错误正确捕获 |
| FE_SOC_010 | 启动流程 | P0 | 功能 | FE_SOC_001-009 | 完整启动序列 |

### FE_SOC_001: SoC 顶层时钟生成

- **描述**: 验证 SoC 顶层正确生成所有时钟域
- **前置条件**: PLL 输入时钟稳定
- **测试步骤**:
  1. 使能 24 MHz 主晶振
  2. 观察 PLL 锁定信号
  3. 测量各时钟域频率
- **预期结果**: 
  - PLL 锁定信号有效
  - clk_core = 2.0 GHz
  - clk_npu = 2.0 GHz
  - clk_sys = 500 MHz
- **边界条件**: 时钟抖动、相位噪声
- **关联需求**: 架构规格书 Section 4

### FE_SOC_002: SoC 顶层复位序列

- **描述**: 验证 SoC 顶层复位按正确顺序释放
- **前置条件**: POR 释放
- **测试步骤**:
  1. 触发 POR
  2. 观察各复位域释放时间
  3. 验证复位去抖
- **预期结果**: 
  - 复位按顺序释放 (rst_por -> rst_sys -> rst_core)
  - 复位信号无毛刺
- **边界条件**: 异步复位亚稳态
- **关联需求**: 架构规格书 Section 5

### FE_SOC_003: 电源域管理

- **描述**: 验证电源域开关控制逻辑
- **前置条件**: PMU 接口可用
- **测试步骤**:
  1. 请求电源域上电
  2. 观察电源门控信号
  3. 请求电源域下电
- **预期结果**:
  - 上电请求产生正确的门控使能
  - 下电请求关闭电源门控
  - 保留模式正确隔离 I/O
- **边界条件**: 电源状态转换时序
- **关联需求**: 架构规格书 Section 6

### FE_SOC_004: 地址解码

- **描述**: 验证 AXI 地址正确解码到各从设备
- **前置条件**: NoC 互联就绪
- **测试步骤**:
  1. 从 Master 发起不同地址的读/写请求
  2. 观察从设备选择信号
  3. 验证地址解码错误响应
- **预期结果**:
  - 地址 0x0000_0000 选通 Boot ROM
  - 地址 0xF000_0000 选通 APB 外设
  - 无效地址返回 DECERR
- **边界条件**: 地址边界条件
- **关联需求**: 架构规格书 Section 3

### FE_SOC_005: 引脚复用配置

- **描述**: 验证引脚功能复用配置
- **前置条件**: GPIO 控制器就绪
- **测试步骤**:
  1. 配置 GPIO 为输出, 写入值
  2. 配置 GPIO 为输入, 驱动外部值
  3. 配置为外设功能 (UART, I2C, SPI)
- **预期结果**:
  - GPIO 输出正确驱动
  - GPIO 输入正确采样
  - 外设功能引脚正确连接
- **边界条件**: 引脚驱动强度、上拉/下拉
- **关联需求**: 架构规格书 Section 7

### FE_SOC_006: Boot ROM 访问

- **描述**: 验证 Boot ROM 正确读取启动代码
- **前置条件**: 时钟、复位就绪
- **测试步骤**:
  1. 从 Boot ROM 地址发起读请求
  2. 验证返回数据
  3. 尝试写入 Boot ROM (应返回错误)
- **预期结果**:
  - 正确读取 256KB Boot ROM 内容
  - 写访问返回 SLVERR
- **边界条件**: 地址对齐、突发传输
- **关联需求**: 架构规格书 Section 8

### FE_SOC_007: AXI4 到 APB 桥接

- **描述**: 验证 AXI4 到 APB4 协议转换
- **前置条件**: AXI Master 和 APB Slave 就绪
- **测试步骤**:
  1. 发起 APB 寄存器读/写
  2. 验证协议转换时序
  3. 测试 PREADY 超时
- **预期结果**:
  - AXI 事务正确转换为 APB 事务
  - 读返回数据正确
  - 写响应正确
- **边界条件**: APB Slave 未就绪
- **关联需求**: 架构规格书 Section 2

### FE_SOC_008: 中断聚合

- **描述**: 验证中断信号聚合与路由
- **前置条件**: 各外设中断源就绪
- **测试步骤**:
  1. 触发各外设中断
  2. 观察 CPU 中断信号
  3. 测试中断优先级
- **预期结果**:
  - 外设中断正确聚合
  - 中断信号有效
- **边界条件**: 中断同时触发
- **关联需求**: 架构规格书 Section 2

### FE_SOC_009: 错误报告

- **描述**: 验证错误检测与报告
- **前置条件**: 错误注入能力
- **测试步骤**:
  1. 注入地址解码错误
  2. 注入访问权限错误
  3. 注入超时错误
- **预期结果**:
  - 错误信号有效
  - 错误代码正确
- **边界条件**: 多错误同时发生
- **关联需求**: 架构规格书 Section 2

### FE_SOC_010: 启动流程

- **描述**: 验证完整 SoC 启动流程
- **前置条件**: 所有模块就绪
- **测试步骤**:
  1. 上电
  2. 等待 PLL 锁定
  3. 等待复位释放
  4. 读取 Boot ROM
  5. 初始化 DDR 控制器
  6. 加载操作系统
- **预期结果**:
  - 完整启动流程成功
  - Boot ROM 代码执行
  - DDR 控制器初始化完成
  - Linux/RTOS 启动
- **边界条件**: 启动时间 < 100ms
- **关联需求**: 架构规格书 Section 8

---

## 验证资源估算

| 资源类型 | 估算值 | 备注 |
|----------|--------|------|
| **测试用例数** | 50+ | 包含功能、异常、边界 |
| **仿真时间** | 1000 CPU hours | RTL 仿真 |
| **回归测试** | 每日运行 | 持续集成 |
| **覆盖率目标** | 100% 代码覆盖率 | 所有模块 |

---

## 验证环境

### RTL 仿真环境

- **仿真器**: VCS / Xcelium / Questa
- **操作系统**: Linux
- **编译时间**: < 30 分钟
- **回归时间**: < 2 小时

### FPGA 原型验证

- **FPGA 平台**: Xilinx/Altera FPGA
- **调试工具**: ChipScope / SignalTap
- **验证周期**: 2-4 周

### 硬件加速验证

- **加速器**: Palladium / Zebu
- **性能提升**: 100-1000x
- **验证周期**: 1-2 周

---

## 交付物清单

| 交付物 | 说明 | 状态 |
|--------|------|------|
| Feature List | 本文档 | 已交付 |
| 验证计划 | 详细验证计划 | 待交付 |
| 验证环境 | UVM 验证环境 | 待交付 |
| 回归测试 | 回归测试套件 | 待交付 |
| 验证报告 | 覆盖率与结果报告 | 待交付 |

---

## 审批

| 角色 | 姓名 | 签名 | 日期 |
|------|------|------|------|
| 前端设计工程师 | - | - | - |
| 前端验证工程师 | - | - | - |
| 架构师 | - | - | - |

---

**文档版本**: V1.0  
**创建日期**: 2026-01-18  
**最后更新**: 2026-01-18

---

*本文档交付给 CV 工程师用于系统级验证规划。*
